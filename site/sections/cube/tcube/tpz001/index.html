
<!doctype html>
<html lang="en" class="no-js">
  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">




        <link rel="prev" href="../tpa101/">


        <link rel="next" href="../tsc001/">


      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">



        <title>TPZ001 - Thorlabs Repository Documentation</title>



      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6f8fc17f.min.css">












        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>



      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">

    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>






  </head>


    <body dir="ltr">


    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">


        <a href="#tpz001" class="md-skip">
          Skip to content
        </a>

    </div>
    <div data-md-component="announce">

    </div>




<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Thorlabs Repository Documentation" class="md-header__button md-logo" aria-label="Thorlabs Repository Documentation" data-md-component="logo">


  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">

      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Thorlabs Repository Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">

              TPZ001

          </span>
        </div>
      </div>
    </div>


      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>



      <label class="md-header__button md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">

        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>

    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>


  </nav>

</header>

    <div class="md-container" data-md-component="container">





<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">





    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">




  Home

      </a>
    </li>







    <li class="md-tabs__item">
      <a href="../../../installation/" class="md-tabs__link">




  Installation

      </a>
    </li>











      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../cube/" class="md-tabs__link">




  Thorlab Cubes

        </a>
      </li>










      <li class="md-tabs__item">
        <a href="../../../tutorial/tutorials/" class="md-tabs__link">




  Tutorials

        </a>
      </li>




    </ul>
  </div>
</nav>



      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">



              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">








<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Thorlabs Repository Documentation" class="md-nav__button md-logo" aria-label="Thorlabs Repository Documentation" data-md-component="logo">


  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Thorlabs Repository Documentation
  </label>

  <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">


  <span class="md-ellipsis">
    Home
  </span>


      </a>
    </li>









    <li class="md-nav__item">
      <a href="../../../installation/" class="md-nav__link">


  <span class="md-ellipsis">
    Installation
  </span>


      </a>
    </li>





























    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>


          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">


  <span class="md-ellipsis">
    Thorlab Cubes
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Thorlab Cubes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../cube/" class="md-nav__link">


  <span class="md-ellipsis">
    Overview
  </span>


      </a>
    </li>



























    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >


          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">


  <span class="md-ellipsis">
    K-Cube
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            K-Cube
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../kcube/kdc101/" class="md-nav__link">


  <span class="md-ellipsis">
    KDC101
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../kcube/kpa101/" class="md-nav__link">


  <span class="md-ellipsis">
    KPA101
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../kcube/kpz101/" class="md-nav__link">


  <span class="md-ellipsis">
    KPZ101
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../kcube/ksc101/" class="md-nav__link">


  <span class="md-ellipsis">
    KSC101
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>





























    <li class="md-nav__item md-nav__item--active md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>


          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">


  <span class="md-ellipsis">
    T-Cube
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            T-Cube
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../tdc001/" class="md-nav__link">


  <span class="md-ellipsis">
    TDC001
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../tpa101/" class="md-nav__link">


  <span class="md-ellipsis">
    TPA101
  </span>


      </a>
    </li>












    <li class="md-nav__item md-nav__item--active">

      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">





        <label class="md-nav__link md-nav__link--active" for="__toc">


  <span class="md-ellipsis">
    TPZ001
  </span>


          <span class="md-nav__icon md-icon"></span>
        </label>

      <a href="./" class="md-nav__link md-nav__link--active">


  <span class="md-ellipsis">
    TPZ001
  </span>


      </a>



<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#controller-description" class="md-nav__link">
    <span class="md-ellipsis">
      Controller Description
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#controller-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Controller Use-Cases
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#peripherals-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Peripherals Examples
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      API Reference
    </span>
  </a>

    <nav class="md-nav" aria-label="API Reference">
      <ul class="md-nav__list">

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz" class="md-nav__link">
    <span class="md-ellipsis">
      Tpz
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_input_volts_source" class="md-nav__link">
    <span class="md-ellipsis">
      get_input_volts_source
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_output_lut" class="md-nav__link">
    <span class="md-ellipsis">
      get_output_lut
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_output_lut_parameters" class="md-nav__link">
    <span class="md-ellipsis">
      get_output_lut_parameters
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_output_position" class="md-nav__link">
    <span class="md-ellipsis">
      get_output_position
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_output_volts" class="md-nav__link">
    <span class="md-ellipsis">
      get_output_volts
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_pi_constants" class="md-nav__link">
    <span class="md-ellipsis">
      get_pi_constants
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_position_control_mode" class="md-nav__link">
    <span class="md-ellipsis">
      get_position_control_mode
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_tpz_display_settings" class="md-nav__link">
    <span class="md-ellipsis">
      get_tpz_display_settings
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.get_tpz_io_settings" class="md-nav__link">
    <span class="md-ellipsis">
      get_tpz_io_settings
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_eeprom_parameters" class="md-nav__link">
    <span class="md-ellipsis">
      set_eeprom_parameters
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_input_volts_source" class="md-nav__link">
    <span class="md-ellipsis">
      set_input_volts_source
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_output_lut" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_lut
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_output_lut_parameters" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_lut_parameters
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_output_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_position
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_output_volts" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_volts
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_pi_constants" class="md-nav__link">
    <span class="md-ellipsis">
      set_pi_constants
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_position_control_mode" class="md-nav__link">
    <span class="md-ellipsis">
      set_position_control_mode
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_tpz_display_settings" class="md-nav__link">
    <span class="md-ellipsis">
      set_tpz_display_settings
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.set_tpz_io_settings" class="md-nav__link">
    <span class="md-ellipsis">
      set_tpz_io_settings
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.start_lut_output" class="md-nav__link">
    <span class="md-ellipsis">
      start_lut_output
    </span>
  </a>

</li>

          <li class="md-nav__item">
  <a href="#thorlabs_cube.driver.tcube.tpz.Tpz.stop_lut_output" class="md-nav__link">
    <span class="md-ellipsis">
      stop_lut_output
    </span>
  </a>

</li>

      </ul>
    </nav>

</li>

    </ul>

</nav>

    </li>










    <li class="md-nav__item">
      <a href="../tsc001/" class="md-nav__link">


  <span class="md-ellipsis">
    TSC001
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>




          </ul>
        </nav>

    </li>
























    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >


          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">


  <span class="md-ellipsis">
    Tutorials
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../../tutorial/tutorials/" class="md-nav__link">


  <span class="md-ellipsis">
    Tutorials
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../../tutorial/examples/sipyco/" class="md-nav__link">


  <span class="md-ellipsis">
    SiPyCo RPC Control
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../../tutorial/examples/artiq/" class="md-nav__link">


  <span class="md-ellipsis">
    ARTIQ Control
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>



  </ul>
</nav>
                  </div>
                </div>
              </div>




            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">




<h1 id="tpz001"><strong>TPZ001</strong></h1>
<p><img alt="An image of a TPZ001 Piezo Controller" src="../images/tpz001.jpg" /></p>
<h2 id="controller-description">Controller Description</h2>
<p>The <strong>TPZ001</strong> is a compact <strong>single-channel</strong> T-Cube controller from Thorlabs designed for <strong>precise control of piezoelectric actuators</strong>. It provides highly accurate position control for applications requiring nanometer-level precision. The TPZ001 supports closed-loop operation with feedback from piezo sensors and is compatible with Thorlabs’ piezo actuators. It features USB connectivity for computer control via Thorlabs’ Kinesis Software or <a href="https://github.com/quantumion/thorlabs_cube">QuantumION's Thorlabs Cube Repository</a>.</p>
<h2 id="controller-use-cases">Controller Use-Cases</h2>
<ul>
<li><strong>TPZ001</strong> is ideal for applications requiring ultra-fine positioning, such as:<ol>
<li><strong>Nanopositioning</strong>: High-precision adjustments of optical components.</li>
<li><strong>Interferometry</strong>: Fine control of optical path lengths for precision measurements.</li>
<li><strong>Microscopy</strong>: Managing piezo-driven sample stages for sub-micron positioning.</li>
</ol>
</li>
</ul>
<h2 id="peripherals-examples">Peripherals Examples</h2>
<ul>
<li><strong>Piezoelectric Actuators</strong></li>
</ul>
<p><img alt="An image of a Thorlabs PAZ005 Piezoelectric Actuator" src="../images/piezoActuator.jpg" /></p>
<ul>
<li><strong>Piezo-Driven Mirror Mounts</strong></li>
</ul>
<p><img alt="An image of a Thorlabs K15CR1/M Piezo-Driven Mirror Mount" src="../images/piezoMirrorMount.jpg" /></p>
<ul>
<li><strong>Piezo Translation Stages</strong></li>
</ul>
<p><img alt="An image of a Thorlabs NanoMax300 Piezo Stage" src="../images/piezoStages.jpg" /></p>
<h2 id="api-reference"><strong>API Reference</strong></h2>


<div class="doc doc-object doc-class">



<a id="thorlabs_cube.driver.tcube.tpz.Tpz"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="thorlabs_cube.driver.base._Cube">_Cube</span></code></p>


        <p>Either :py:meth:<code>set_tpz_io_settings()&lt;Tpz.set_tpz_io_settings&gt;</code>
or :py:meth:<code>get_tpz_io_settings()&lt;Tpz.get_tpz_io_settings&gt;</code> must
be completed to finish initialising the driver.</p>






              <details class="quote">
                <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Tpz</span><span class="p">(</span><span class="n">_Cube</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Either :py:meth:`set_tpz_io_settings()&lt;Tpz.set_tpz_io_settings&gt;`</span>
<span class="sd">    or :py:meth:`get_tpz_io_settings()&lt;Tpz.get_tpz_io_settings&gt;` must</span>
<span class="sd">    be completed to finish initialising the driver.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serial_dev</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">serial_dev</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">msg_id</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">id</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">data</span>

        <span class="k">if</span> <span class="n">msg_id</span> <span class="o">==</span> <span class="n">MGMSG</span><span class="o">.</span><span class="n">HW_DISCONNECT</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MsgError</span><span class="p">(</span><span class="s2">&quot;Error: Please disconnect the TPZ001&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">msg_id</span> <span class="o">==</span> <span class="n">MGMSG</span><span class="o">.</span><span class="n">HW_RESPONSE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MsgError</span><span class="p">(</span>
                <span class="s2">&quot;Hardware error, please disconnect &quot;</span> <span class="s2">&quot;and reconnect the TPZ001&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">msg_id</span> <span class="o">==</span> <span class="n">MGMSG</span><span class="o">.</span><span class="n">HW_RICHRESPONSE</span><span class="p">:</span>
            <span class="p">(</span><span class="n">code</span><span class="p">,)</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span>
            <span class="k">raise</span> <span class="n">MsgError</span><span class="p">(</span>
                <span class="s2">&quot;Hardware error </span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">code</span><span class="p">,</span>
                    <span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;ascii&quot;</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_position_control_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_mode</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the control loop mode.</span>

<span class="sd">        When in closed-loop mode, position is maintained by a feedback signal</span>
<span class="sd">        from the piezo actuator. This is only possible when using actuators</span>
<span class="sd">        equipped with position sensing.</span>

<span class="sd">        :param control_mode: 0x01 for Open Loop (no feedback).</span>
<span class="sd">            0x02 for Closed Loop (feedback employed).</span>
<span class="sd">            0x03 for Open Loop Smooth.</span>
<span class="sd">            0x04 for Closed Loop Smooth.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
            <span class="n">Message</span><span class="p">(</span>
                <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_POSCONTROLMODE</span><span class="p">,</span> <span class="n">param1</span><span class="o">=</span><span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">param2</span><span class="o">=</span><span class="n">control_mode</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_position_control_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the control loop mode.</span>

<span class="sd">        :return: Returns the control mode.</span>
<span class="sd">            0x01 for Open Loop (no feedback).</span>
<span class="sd">            0x02 for Closed Loop (feedback employed).</span>
<span class="sd">            0x03 for Open Loop Smooth.</span>
<span class="sd">            0x04 for Closed Loop Smooth.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_POSCONTROLMODE</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_POSCONTROLMODE</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">param2</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_volts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">voltage</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set output voltage applied to the piezo actuator.</span>

<span class="sd">        This command is only applicable in Open Loop mode. If called when in</span>
<span class="sd">        Closed Loop mode it is ignored.</span>

<span class="sd">        :param voltage: The output voltage applied to the piezo when operating</span>
<span class="sd">            in open loop mode. The voltage value must be in range</span>
<span class="sd">            [0; voltage_limit]. Voltage_limit being set by the</span>
<span class="sd">            :py:meth:`set_tpz_io_settings()&lt;Tpz.set_tpz_io_settings&gt;`</span>
<span class="sd">            method between the three values 75 V, 100 V and 150 V.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Voltage limit is not set&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">voltage</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">voltage</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Voltage must be in range [0;</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">volt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">voltage</span> <span class="o">*</span> <span class="mi">32767</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">)</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">volt</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTVOLTS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_volts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the output voltage applied to the piezo actuator.</span>

<span class="sd">        :return: The output voltage.</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTVOLTS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTVOLTS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">/</span> <span class="mi">32767</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position_sw</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set output position of the piezo actuator.</span>

<span class="sd">        This command is only applicable in Closed Loop mode. If called when in</span>
<span class="sd">        Open Loop mode, it is ignored. The position of the actuator is relative</span>
<span class="sd">        to the datum set for the arrangement using the ZeroPosition method.</span>

<span class="sd">        :param position_sw: The output position of the piezo relative to the</span>
<span class="sd">            zero position. The voltage is set in the range [0; 32767] or</span>
<span class="sd">            [0; 65535] depending on the unit. This corresponds to 0 to 100% of</span>
<span class="sd">            the maximum piezo extension.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">position_sw</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTPOS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get output position of piezo actuator.</span>

<span class="sd">        :return: The output position of the piezo relative to the zero</span>
<span class="sd">            position.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTPOS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTPOS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_input_volts_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volt_src</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the input source(s) which controls the output from the HV</span>
<span class="sd">        amplifier circuit (i.e. the drive to the piezo actuators).</span>

<span class="sd">        :param volt_src: The following values are entered into the VoltSrc</span>
<span class="sd">            parameter to select the various analog sources:</span>

<span class="sd">            0x00 Software Only: Unit responds only to software inputs and the</span>
<span class="sd">            HV amp output is that set using the :py:meth:`set_output_volts()`</span>
<span class="sd">            &lt;Tpz.set_output_volts&gt;` method.</span>

<span class="sd">            0x01 External Signal: Unit sums the differential signal on the rear</span>
<span class="sd">            panel EXT IN(+) and EXT IN(-) connectors with the voltage set</span>
<span class="sd">            using the set_outputvolts method.</span>

<span class="sd">            0x02 Potentiometer: The HV amp output is controlled by a</span>
<span class="sd">            potentiometer input (either on the control panel, or connected</span>
<span class="sd">            to the rear panel User I/O D-type connector) summed with the</span>
<span class="sd">            voltage set using the set_outputvolts method.</span>

<span class="sd">            The values can be bitwise or&#39;ed to sum the software source with</span>
<span class="sd">            either or both of the other source options.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">volt_src</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_INPUTVOLTSSRC</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_volts_source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the input source(s) which controls the output from the HV</span>
<span class="sd">        amplifier circuit.</span>

<span class="sd">        :return: Value which selects the various analog sources, cf.</span>
<span class="sd">            :py:meth:`set_input_volts_source()&lt;Tpz.set_input_volts_source&gt;`</span>
<span class="sd">            method docstring for meaning of bits.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_INPUTVOLTSSRC</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_INPUTVOLTSSRC</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_pi_constants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_const</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">int_const</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the proportional and integration feedback loop constants.</span>

<span class="sd">        These parameters determine the response characteristics when operating</span>
<span class="sd">        in closed loop mode.</span>
<span class="sd">        The processors within the controller compare the required (demanded)</span>
<span class="sd">        position with the actual position to create an error, which is then</span>
<span class="sd">        passed through a digital PI-type filter. The filtered value is used to</span>
<span class="sd">        develop an output voltage to drive the pizeo.</span>

<span class="sd">        :param prop_const: Value of the proportional term in range [0; 255].</span>
<span class="sd">        :param int_const: Value of the integral term in range [0; 255].</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HHH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">prop_const</span><span class="p">,</span> <span class="n">int_const</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_PICONSTS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_pi_constants</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the proportional and integration feedback loop constants.</span>

<span class="sd">        :return: Returns a tuple whose first element is the proportional</span>
<span class="sd">            term and the second element is the integral term.</span>
<span class="sd">        :rtype: a 2 int elements tuple : (int, int)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_PICONSTS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_PICONSTS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_lut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lut_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the ouput LUT values for WGM (Waveform Generator Mode).</span>

<span class="sd">        It is possible to use the controller in an arbitrary Waveform</span>
<span class="sd">        Generator Mode (WGM). Rather than the unit outputting an adjustable</span>
<span class="sd">        but static voltage or position, the WGM allows the user to define a</span>
<span class="sd">        voltage or position sequence to be output, either periodically or a</span>
<span class="sd">        fixed number of times, with a selectable interval between adjacent</span>
<span class="sd">        samples.</span>

<span class="sd">        This waveform generation function is particularly useful for</span>
<span class="sd">        operations such as scanning over a particular area, or in any other</span>
<span class="sd">        application that requires a predefined movement sequence. The waveform</span>
<span class="sd">        is stored as values in an array, with a maximum of 513 samples.</span>

<span class="sd">        The samples can have the meaning of voltage or position; if</span>
<span class="sd">        open loop operation is specified when the samples are output, then</span>
<span class="sd">        their meaning is voltage and vice versa, if the channel is set to</span>
<span class="sd">        closed loop operation, the samples are interpreted as position values.</span>

<span class="sd">        If the waveform to be output requires less than 513 samples, it is</span>
<span class="sd">        sufficient to download the desired number of samples. This function is</span>
<span class="sd">        used to load the LUT array with the required output waveform. The</span>
<span class="sd">        applicable channel is specified by the Chan Ident parameter If only a</span>
<span class="sd">        sub set of the array is being used (as specified by the cyclelength</span>
<span class="sd">        parameter of the :py:meth:`set_output_lut_parameters()`</span>
<span class="sd">        &lt;Tpz.set_output_lut_parameters&gt;`</span>
<span class="sd">        function), then only the first cyclelength values need to be set. In</span>
<span class="sd">        this manner, any arbitrary voltage waveform can be programmed into the</span>
<span class="sd">        LUT. Note. The LUT values are output by the system at a maximum</span>
<span class="sd">        bandwidth of 7 KHz, e.g. 500 LUT values will take approximately 71 ms</span>
<span class="sd">        to be clocked out.</span>

<span class="sd">        :param lut_index: The position in the array of the value to be set (0</span>
<span class="sd">            to 512 for TPZ).</span>
<span class="sd">        :param output: The voltage value to be set. Values are in the range</span>
<span class="sd">            [0; voltage_limit]. Voltage_limit being set with the</span>
<span class="sd">            :py:meth:`set_tpz_io_settings&lt;Tpz.set_tpz_io_settings&gt;`</span>
<span class="sd">            method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Voltage limit is not set&quot;</span><span class="p">)</span>

        <span class="n">volt</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">output</span> <span class="o">*</span> <span class="mi">32767</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">)</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HHH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">lut_index</span><span class="p">,</span> <span class="n">volt</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTLUT</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_lut</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the ouput LUT values for WGM (Waveform Generator Mode).</span>

<span class="sd">        :return: a tuple whose first element is the lut index and the second is</span>
<span class="sd">            the voltage output value.</span>
<span class="sd">        :rtype: a 2 elements tuple (int, float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTLUT</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTLUT</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="n">index</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;Hh&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="k">return</span> <span class="n">index</span><span class="p">,</span> <span class="n">output</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">/</span> <span class="mi">32767</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_lut_parameters</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">cycle_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">num_cycles</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">delay_time</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">precycle_rest</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">postcycle_rest</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set Waveform Generator Mode parameters.</span>

<span class="sd">        It is possible to use the controller in an arbitrary Waveform</span>
<span class="sd">        Generator Mode (WGM). Rather than the unit outputting an adjustable</span>
<span class="sd">        but static voltage or position, the WGM allows the user to define a</span>
<span class="sd">        voltage or position sequence to be output, either periodically or a</span>
<span class="sd">        fixed number of times, with a selectable interval between adjacent</span>
<span class="sd">        samples.</span>
<span class="sd">        This waveform generation function is particularly useful for operations</span>
<span class="sd">        such as scanning over a particular area, or in any other application</span>
<span class="sd">        that requires a predefined movement sequence. This function is used to</span>
<span class="sd">        set parameters which control the output of the LUT array.</span>

<span class="sd">        :param mode: Specifies the ouput mode of the LUT waveform as follows:</span>

<span class="sd">            0x01 - Output Continuous - The waveform is output continuously</span>
<span class="sd">            (i.e. until a StopOPLut command is received.)</span>

<span class="sd">            0x02 - Output Fixed - A fixed number of waveform cycles are output</span>
<span class="sd">            (as specified in the num_cycles parameter).</span>
<span class="sd">        :param cycle_length: Specifies how many samples will be output in each</span>
<span class="sd">            cycle of the waveform. It can be set in the range [0; 512]</span>
<span class="sd">            (for TPZ). It must be less than or equal to the total number of</span>
<span class="sd">            samples that were loaded.</span>
<span class="sd">        :param num_cycles: Specifies the number of cycles (1 to 2147483648) to</span>
<span class="sd">            be output when the Mode parameter is set to fixed. If Mode is set</span>
<span class="sd">            to Continuous, the num_cycles parameter is ignored. In both cases,</span>
<span class="sd">            the waveform is not output until a StartOPLUT command is received.</span>
<span class="sd">        :param delay_time: Specifies the delay (in sample intervals) that the</span>
<span class="sd">            system waits after setting each LUT output value. By default, the</span>
<span class="sd">            time the system takes to output LUT values (sampling interval) is</span>
<span class="sd">            set at the maximum bandwidth possible, i.e. 4 kHz (0.25 ms) for TPZ</span>
<span class="sd">            units. The delay_time parameter specifies the time interval between</span>
<span class="sd">            neighbouring samples, i.e. for how long the sample will remain at</span>
<span class="sd">            its present value. To increase the time between samples, set the</span>
<span class="sd">            delay_time parameter to the required additional delay (1 to</span>
<span class="sd">            2147483648 sample intervals). In this way, the user can stretch or</span>
<span class="sd">            shrink the waveform without affecting its overall shape.</span>
<span class="sd">        :param precycle_rest: In some applications, during waveform generation</span>
<span class="sd">            the first and the last samples may need to be handled differently</span>
<span class="sd">            from the rest of the waveform. For example, in a positioning system</span>
<span class="sd">            it may be necessary to start the movement by staying at a certain</span>
<span class="sd">            position for a specified length of time, then perform a movement,</span>
<span class="sd">            then remain at the last position for another specified length of</span>
<span class="sd">            time. This is the purpose of precycle_rest and postcycle_rest</span>
<span class="sd">            parameters, i.e. they specify the length of time that the first and</span>
<span class="sd">            last samples are output for, independently of the delay_time</span>
<span class="sd">            parameter. The precycle_rest parameter allows a delay time to be</span>
<span class="sd">            set before the system starts to clock out the LUT values. The delay</span>
<span class="sd">            can be set between 0 and 2147483648 sample intervals. The system</span>
<span class="sd">            then outputs the first value in the LUT until the PreCycleRest time</span>
<span class="sd">            has expired.</span>
<span class="sd">        :param postcycle_rest: In a similar way to precycle_rest, the</span>
<span class="sd">            postcycle_rest parameter specifies the delay imposed by the system</span>
<span class="sd">            after a LUT table has been output. The delay can be set between 0</span>
<span class="sd">            and 2147483648 sample intervals. The system then outputs the last</span>
<span class="sd">            value in the cycle until the postcycle_rest time has expired.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># triggering is not supported by the TPZ device</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span>
            <span class="s2">&quot;&lt;HHHLLLLHLH&quot;</span><span class="p">,</span>
            <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span>
            <span class="n">mode</span><span class="p">,</span>
            <span class="n">cycle_length</span><span class="p">,</span>
            <span class="n">num_cycles</span><span class="p">,</span>
            <span class="n">delay_time</span><span class="p">,</span>
            <span class="n">precycle_rest</span><span class="p">,</span>
            <span class="n">postcycle_rest</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTLUTPARAMS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_lut_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Waveform Generator Mode parameters.</span>

<span class="sd">        :return: a 6 int elements tuple whose members are (mode, cycle_length,</span>
<span class="sd">            num_cycles, delay_time, precycle_rest, postcycle_rest).</span>
<span class="sd">        :rtype: 6 int elements tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTLUTPARAMS</span><span class="p">,</span>
            <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTLUTPARAMS</span><span class="p">],</span>
            <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;HHLLLL&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">22</span><span class="p">])</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">start_lut_output</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the voltage waveform (LUT) outputs.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_START_LUTOUTPUT</span><span class="p">,</span> <span class="n">param1</span><span class="o">=</span><span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">stop_lut_output</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the voltage waveform (LUT) outputs.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_STOP_LUTOUTPUT</span><span class="p">,</span> <span class="n">param1</span><span class="o">=</span><span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_eeprom_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the parameter settings for the specified message.</span>

<span class="sd">        :param msg_id: The message ID of the message containing the parameters</span>
<span class="sd">            to be saved.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_EEPROMPARAMS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_tpz_display_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intensity</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the intensity of the LED display on the front of the TPZ unit.</span>

<span class="sd">        :param intensity: The intensity is set as a value from 0 (Off) to 255</span>
<span class="sd">            (brightest).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">intensity</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_TPZ_DISPSETTINGS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_tpz_display_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the intensity of the LED display on the front of the TPZ unit.</span>

<span class="sd">        :return: The intensity as a value from 0 (Off) to 255 (brightest).</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_TPZ_DISPSETTINGS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_TPZ_DISPSETTINGS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">set_tpz_io_settings</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">voltage_limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hub_analog_input</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set various I/O settings.</span>

<span class="sd">        :param voltage_limit: The piezo actuator connected to the T-Cube has a</span>
<span class="sd">            specific maximum operating voltage. This parameter sets the maximum</span>
<span class="sd">            output to the value among the following ones:</span>

<span class="sd">            75 V limit.</span>

<span class="sd">            100 V limit.</span>

<span class="sd">            150 V limit.</span>
<span class="sd">        :param hub_analog_input: When the T-Cube piezo driver unit is used in</span>
<span class="sd">            conjunction with the T-Cube Strain Gauge Reader (TSG001) on the</span>
<span class="sd">            T-Cube Controller Hub (TCH001), a feedback signal can be passed</span>
<span class="sd">            from the Strain Gauge Reader to the Piezo unit.</span>
<span class="sd">            High precision closed loop operation is then possible using the</span>
<span class="sd">            complete range of feedback-equipped piezo actuators.</span>
<span class="sd">            This parameter is routed to the Piezo unit as follows:</span>

<span class="sd">            0x01: the feedback signals run through all T-Cube bays.</span>

<span class="sd">            0x02: the feedback signals run between adjacent pairs of T-Cube</span>
<span class="sd">            bays (i.e. 1&amp;2, 3&amp;4, 5&amp;6). This setting is useful when several</span>
<span class="sd">            pairs of Strain Gauge/Piezo Driver cubes are being used on the same</span>
<span class="sd">            hub.</span>

<span class="sd">            0x03: the feedback signals run through the read panel SMA</span>
<span class="sd">            connectors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">=</span> <span class="n">voltage_limit</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>
            <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
            <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">150</span><span class="p">:</span>
            <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;voltage_limit must be 75 V, 100 V or 150 V&quot;</span><span class="p">)</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span>
            <span class="s2">&quot;&lt;HHHHH&quot;</span><span class="p">,</span>
            <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span>
            <span class="n">voltage_limit</span><span class="p">,</span>
            <span class="n">hub_analog_input</span><span class="p">,</span>
            <span class="n">Tpz</span><span class="o">.</span><span class="n">_RESERVED</span><span class="p">,</span>
            <span class="n">Tpz</span><span class="o">.</span><span class="n">_RESERVED</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_TPZ_IOSETTINGS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_tpz_io_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get various I/O settings.</span>

<span class="sd">        :return: Returns a tuple whose elements are the voltage limit and the</span>
<span class="sd">            Hub analog input. Refer to :py:meth:`set_tpz_io_settings()`</span>
<span class="sd">            &lt;Tpz.set_tpz_io_settings&gt;` for</span>
<span class="sd">            the meaning of those parameters.</span>
<span class="sd">        :rtype: a 2 elements tuple (int, int)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_TPZ_IOSETTINGS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_TPZ_IOSETTINGS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
        <span class="p">)</span>
        <span class="n">voltage_limit</span><span class="p">,</span> <span class="n">hub_analog_input</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">75</span>
        <span class="k">elif</span> <span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">elif</span> <span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">150</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Voltage limit should be in range [1; 3]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">=</span> <span class="n">voltage_limit</span>
        <span class="k">return</span> <span class="n">voltage_limit</span><span class="p">,</span> <span class="n">hub_analog_input</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_input_volts_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_input_volts_source</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the input source(s) which controls the output from the HV
amplifier circuit.</p>
<p>:return: Value which selects the various analog sources, cf.
    :py:meth:<code>set_input_volts_source()&lt;Tpz.set_input_volts_source&gt;</code>
    method docstring for meaning of bits.
:rtype: int</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_volts_source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the input source(s) which controls the output from the HV</span>
<span class="sd">    amplifier circuit.</span>

<span class="sd">    :return: Value which selects the various analog sources, cf.</span>
<span class="sd">        :py:meth:`set_input_volts_source()&lt;Tpz.set_input_volts_source&gt;`</span>
<span class="sd">        method docstring for meaning of bits.</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_INPUTVOLTSSRC</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_INPUTVOLTSSRC</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_output_lut" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_output_lut</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the ouput LUT values for WGM (Waveform Generator Mode).</p>
<p>:return: a tuple whose first element is the lut index and the second is
    the voltage output value.
:rtype: a 2 elements tuple (int, float)</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_lut</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the ouput LUT values for WGM (Waveform Generator Mode).</span>

<span class="sd">    :return: a tuple whose first element is the lut index and the second is</span>
<span class="sd">        the voltage output value.</span>
<span class="sd">    :rtype: a 2 elements tuple (int, float)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTLUT</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTLUT</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="n">index</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;Hh&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
    <span class="k">return</span> <span class="n">index</span><span class="p">,</span> <span class="n">output</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">/</span> <span class="mi">32767</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_output_lut_parameters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_output_lut_parameters</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get Waveform Generator Mode parameters.</p>
<p>:return: a 6 int elements tuple whose members are (mode, cycle_length,
    num_cycles, delay_time, precycle_rest, postcycle_rest).
:rtype: 6 int elements tuple</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_lut_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get Waveform Generator Mode parameters.</span>

<span class="sd">    :return: a 6 int elements tuple whose members are (mode, cycle_length,</span>
<span class="sd">        num_cycles, delay_time, precycle_rest, postcycle_rest).</span>
<span class="sd">    :rtype: 6 int elements tuple</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTLUTPARAMS</span><span class="p">,</span>
        <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTLUTPARAMS</span><span class="p">],</span>
        <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;HHLLLL&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">22</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_output_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_output_position</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get output position of piezo actuator.</p>
<p>:return: The output position of the piezo relative to the zero
    position.
:rtype: int</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get output position of piezo actuator.</span>

<span class="sd">    :return: The output position of the piezo relative to the zero</span>
<span class="sd">        position.</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTPOS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTPOS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_output_volts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_output_volts</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the output voltage applied to the piezo actuator.</p>
<p>:return: The output voltage.
:rtype: float</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_output_volts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the output voltage applied to the piezo actuator.</span>

<span class="sd">    :return: The output voltage.</span>
<span class="sd">    :rtype: float</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_OUTPUTVOLTS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_OUTPUTVOLTS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">/</span> <span class="mi">32767</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_pi_constants" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pi_constants</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the proportional and integration feedback loop constants.</p>
<p>:return: Returns a tuple whose first element is the proportional
    term and the second element is the integral term.
:rtype: a 2 int elements tuple : (int, int)</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_pi_constants</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the proportional and integration feedback loop constants.</span>

<span class="sd">    :return: Returns a tuple whose first element is the proportional</span>
<span class="sd">        term and the second element is the integral term.</span>
<span class="sd">    :rtype: a 2 int elements tuple : (int, int)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_PICONSTS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_PICONSTS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_position_control_mode" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_position_control_mode</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the control loop mode.</p>
<p>:return: Returns the control mode.
    0x01 for Open Loop (no feedback).
    0x02 for Closed Loop (feedback employed).
    0x03 for Open Loop Smooth.
    0x04 for Closed Loop Smooth.
:rtype: int</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_position_control_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the control loop mode.</span>

<span class="sd">    :return: Returns the control mode.</span>
<span class="sd">        0x01 for Open Loop (no feedback).</span>
<span class="sd">        0x02 for Closed Loop (feedback employed).</span>
<span class="sd">        0x03 for Open Loop Smooth.</span>
<span class="sd">        0x04 for Closed Loop Smooth.</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_POSCONTROLMODE</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_POSCONTROLMODE</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">param2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_tpz_display_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_tpz_display_settings</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the intensity of the LED display on the front of the TPZ unit.</p>
<p>:return: The intensity as a value from 0 (Off) to 255 (brightest).
:rtype: int</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_tpz_display_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the intensity of the LED display on the front of the TPZ unit.</span>

<span class="sd">    :return: The intensity as a value from 0 (Off) to 255 (brightest).</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_TPZ_DISPSETTINGS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_TPZ_DISPSETTINGS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.get_tpz_io_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_tpz_io_settings</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get various I/O settings.</p>
<p>:return: Returns a tuple whose elements are the voltage limit and the
    Hub analog input. Refer to :py:meth:<code>set_tpz_io_settings()</code>
    <Tpz.set_tpz_io_settings>` for
    the meaning of those parameters.
:rtype: a 2 elements tuple (int, int)</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_tpz_io_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get various I/O settings.</span>

<span class="sd">    :return: Returns a tuple whose elements are the voltage limit and the</span>
<span class="sd">        Hub analog input. Refer to :py:meth:`set_tpz_io_settings()`</span>
<span class="sd">        &lt;Tpz.set_tpz_io_settings&gt;` for</span>
<span class="sd">        the meaning of those parameters.</span>
<span class="sd">    :rtype: a 2 elements tuple (int, int)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">get_msg</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
        <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_REQ_TPZ_IOSETTINGS</span><span class="p">,</span> <span class="p">[</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_GET_TPZ_IOSETTINGS</span><span class="p">],</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span>
    <span class="p">)</span>
    <span class="n">voltage_limit</span><span class="p">,</span> <span class="n">hub_analog_input</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">get_msg</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">75</span>
    <span class="k">elif</span> <span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">elif</span> <span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">150</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Voltage limit should be in range [1; 3]&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">=</span> <span class="n">voltage_limit</span>
    <span class="k">return</span> <span class="n">voltage_limit</span><span class="p">,</span> <span class="n">hub_analog_input</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_eeprom_parameters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_eeprom_parameters</span><span class="p">(</span><span class="n">msg_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Save the parameter settings for the specified message.</p>
<p>:param msg_id: The message ID of the message containing the parameters
    to be saved.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_eeprom_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the parameter settings for the specified message.</span>

<span class="sd">    :param msg_id: The message ID of the message containing the parameters</span>
<span class="sd">        to be saved.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_EEPROMPARAMS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_input_volts_source" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_input_volts_source</span><span class="p">(</span><span class="n">volt_src</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set the input source(s) which controls the output from the HV
amplifier circuit (i.e. the drive to the piezo actuators).</p>
<p>:param volt_src: The following values are entered into the VoltSrc
    parameter to select the various analog sources:</p>
<pre><code>0x00 Software Only: Unit responds only to software inputs and the
HV amp output is that set using the :py:meth:`set_output_volts()`
&lt;Tpz.set_output_volts&gt;` method.

0x01 External Signal: Unit sums the differential signal on the rear
panel EXT IN(+) and EXT IN(-) connectors with the voltage set
using the set_outputvolts method.

0x02 Potentiometer: The HV amp output is controlled by a
potentiometer input (either on the control panel, or connected
to the rear panel User I/O D-type connector) summed with the
voltage set using the set_outputvolts method.

The values can be bitwise or'ed to sum the software source with
either or both of the other source options.
</code></pre>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_input_volts_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volt_src</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the input source(s) which controls the output from the HV</span>
<span class="sd">    amplifier circuit (i.e. the drive to the piezo actuators).</span>

<span class="sd">    :param volt_src: The following values are entered into the VoltSrc</span>
<span class="sd">        parameter to select the various analog sources:</span>

<span class="sd">        0x00 Software Only: Unit responds only to software inputs and the</span>
<span class="sd">        HV amp output is that set using the :py:meth:`set_output_volts()`</span>
<span class="sd">        &lt;Tpz.set_output_volts&gt;` method.</span>

<span class="sd">        0x01 External Signal: Unit sums the differential signal on the rear</span>
<span class="sd">        panel EXT IN(+) and EXT IN(-) connectors with the voltage set</span>
<span class="sd">        using the set_outputvolts method.</span>

<span class="sd">        0x02 Potentiometer: The HV amp output is controlled by a</span>
<span class="sd">        potentiometer input (either on the control panel, or connected</span>
<span class="sd">        to the rear panel User I/O D-type connector) summed with the</span>
<span class="sd">        voltage set using the set_outputvolts method.</span>

<span class="sd">        The values can be bitwise or&#39;ed to sum the software source with</span>
<span class="sd">        either or both of the other source options.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">volt_src</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_INPUTVOLTSSRC</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_output_lut" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_output_lut</span><span class="p">(</span><span class="n">lut_index</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set the ouput LUT values for WGM (Waveform Generator Mode).</p>
<p>It is possible to use the controller in an arbitrary Waveform
Generator Mode (WGM). Rather than the unit outputting an adjustable
but static voltage or position, the WGM allows the user to define a
voltage or position sequence to be output, either periodically or a
fixed number of times, with a selectable interval between adjacent
samples.</p>
<p>This waveform generation function is particularly useful for
operations such as scanning over a particular area, or in any other
application that requires a predefined movement sequence. The waveform
is stored as values in an array, with a maximum of 513 samples.</p>
<p>The samples can have the meaning of voltage or position; if
open loop operation is specified when the samples are output, then
their meaning is voltage and vice versa, if the channel is set to
closed loop operation, the samples are interpreted as position values.</p>
<p>If the waveform to be output requires less than 513 samples, it is
sufficient to download the desired number of samples. This function is
used to load the LUT array with the required output waveform. The
applicable channel is specified by the Chan Ident parameter If only a
sub set of the array is being used (as specified by the cyclelength
parameter of the :py:meth:<code>set_output_lut_parameters()</code>
<Tpz.set_output_lut_parameters>`
function), then only the first cyclelength values need to be set. In
this manner, any arbitrary voltage waveform can be programmed into the
LUT. Note. The LUT values are output by the system at a maximum
bandwidth of 7 KHz, e.g. 500 LUT values will take approximately 71 ms
to be clocked out.</p>
<p>:param lut_index: The position in the array of the value to be set (0
    to 512 for TPZ).
:param output: The voltage value to be set. Values are in the range
    [0; voltage_limit]. Voltage_limit being set with the
    :py:meth:<code>set_tpz_io_settings&lt;Tpz.set_tpz_io_settings&gt;</code>
    method.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_lut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lut_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the ouput LUT values for WGM (Waveform Generator Mode).</span>

<span class="sd">    It is possible to use the controller in an arbitrary Waveform</span>
<span class="sd">    Generator Mode (WGM). Rather than the unit outputting an adjustable</span>
<span class="sd">    but static voltage or position, the WGM allows the user to define a</span>
<span class="sd">    voltage or position sequence to be output, either periodically or a</span>
<span class="sd">    fixed number of times, with a selectable interval between adjacent</span>
<span class="sd">    samples.</span>

<span class="sd">    This waveform generation function is particularly useful for</span>
<span class="sd">    operations such as scanning over a particular area, or in any other</span>
<span class="sd">    application that requires a predefined movement sequence. The waveform</span>
<span class="sd">    is stored as values in an array, with a maximum of 513 samples.</span>

<span class="sd">    The samples can have the meaning of voltage or position; if</span>
<span class="sd">    open loop operation is specified when the samples are output, then</span>
<span class="sd">    their meaning is voltage and vice versa, if the channel is set to</span>
<span class="sd">    closed loop operation, the samples are interpreted as position values.</span>

<span class="sd">    If the waveform to be output requires less than 513 samples, it is</span>
<span class="sd">    sufficient to download the desired number of samples. This function is</span>
<span class="sd">    used to load the LUT array with the required output waveform. The</span>
<span class="sd">    applicable channel is specified by the Chan Ident parameter If only a</span>
<span class="sd">    sub set of the array is being used (as specified by the cyclelength</span>
<span class="sd">    parameter of the :py:meth:`set_output_lut_parameters()`</span>
<span class="sd">    &lt;Tpz.set_output_lut_parameters&gt;`</span>
<span class="sd">    function), then only the first cyclelength values need to be set. In</span>
<span class="sd">    this manner, any arbitrary voltage waveform can be programmed into the</span>
<span class="sd">    LUT. Note. The LUT values are output by the system at a maximum</span>
<span class="sd">    bandwidth of 7 KHz, e.g. 500 LUT values will take approximately 71 ms</span>
<span class="sd">    to be clocked out.</span>

<span class="sd">    :param lut_index: The position in the array of the value to be set (0</span>
<span class="sd">        to 512 for TPZ).</span>
<span class="sd">    :param output: The voltage value to be set. Values are in the range</span>
<span class="sd">        [0; voltage_limit]. Voltage_limit being set with the</span>
<span class="sd">        :py:meth:`set_tpz_io_settings&lt;Tpz.set_tpz_io_settings&gt;`</span>
<span class="sd">        method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Voltage limit is not set&quot;</span><span class="p">)</span>

    <span class="n">volt</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">output</span> <span class="o">*</span> <span class="mi">32767</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HHH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">lut_index</span><span class="p">,</span> <span class="n">volt</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTLUT</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_output_lut_parameters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_output_lut_parameters</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">cycle_length</span><span class="p">,</span> <span class="n">num_cycles</span><span class="p">,</span> <span class="n">delay_time</span><span class="p">,</span> <span class="n">precycle_rest</span><span class="p">,</span> <span class="n">postcycle_rest</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set Waveform Generator Mode parameters.</p>
<p>It is possible to use the controller in an arbitrary Waveform
Generator Mode (WGM). Rather than the unit outputting an adjustable
but static voltage or position, the WGM allows the user to define a
voltage or position sequence to be output, either periodically or a
fixed number of times, with a selectable interval between adjacent
samples.
This waveform generation function is particularly useful for operations
such as scanning over a particular area, or in any other application
that requires a predefined movement sequence. This function is used to
set parameters which control the output of the LUT array.</p>
<p>:param mode: Specifies the ouput mode of the LUT waveform as follows:</p>
<pre><code>0x01 - Output Continuous - The waveform is output continuously
(i.e. until a StopOPLut command is received.)

0x02 - Output Fixed - A fixed number of waveform cycles are output
(as specified in the num_cycles parameter).
</code></pre>
<p>:param cycle_length: Specifies how many samples will be output in each
    cycle of the waveform. It can be set in the range [0; 512]
    (for TPZ). It must be less than or equal to the total number of
    samples that were loaded.
:param num_cycles: Specifies the number of cycles (1 to 2147483648) to
    be output when the Mode parameter is set to fixed. If Mode is set
    to Continuous, the num_cycles parameter is ignored. In both cases,
    the waveform is not output until a StartOPLUT command is received.
:param delay_time: Specifies the delay (in sample intervals) that the
    system waits after setting each LUT output value. By default, the
    time the system takes to output LUT values (sampling interval) is
    set at the maximum bandwidth possible, i.e. 4 kHz (0.25 ms) for TPZ
    units. The delay_time parameter specifies the time interval between
    neighbouring samples, i.e. for how long the sample will remain at
    its present value. To increase the time between samples, set the
    delay_time parameter to the required additional delay (1 to
    2147483648 sample intervals). In this way, the user can stretch or
    shrink the waveform without affecting its overall shape.
:param precycle_rest: In some applications, during waveform generation
    the first and the last samples may need to be handled differently
    from the rest of the waveform. For example, in a positioning system
    it may be necessary to start the movement by staying at a certain
    position for a specified length of time, then perform a movement,
    then remain at the last position for another specified length of
    time. This is the purpose of precycle_rest and postcycle_rest
    parameters, i.e. they specify the length of time that the first and
    last samples are output for, independently of the delay_time
    parameter. The precycle_rest parameter allows a delay time to be
    set before the system starts to clock out the LUT values. The delay
    can be set between 0 and 2147483648 sample intervals. The system
    then outputs the first value in the LUT until the PreCycleRest time
    has expired.
:param postcycle_rest: In a similar way to precycle_rest, the
    postcycle_rest parameter specifies the delay imposed by the system
    after a LUT table has been output. The delay can be set between 0
    and 2147483648 sample intervals. The system then outputs the last
    value in the cycle until the postcycle_rest time has expired.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_lut_parameters</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">mode</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">cycle_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">num_cycles</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">delay_time</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">precycle_rest</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">postcycle_rest</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set Waveform Generator Mode parameters.</span>

<span class="sd">    It is possible to use the controller in an arbitrary Waveform</span>
<span class="sd">    Generator Mode (WGM). Rather than the unit outputting an adjustable</span>
<span class="sd">    but static voltage or position, the WGM allows the user to define a</span>
<span class="sd">    voltage or position sequence to be output, either periodically or a</span>
<span class="sd">    fixed number of times, with a selectable interval between adjacent</span>
<span class="sd">    samples.</span>
<span class="sd">    This waveform generation function is particularly useful for operations</span>
<span class="sd">    such as scanning over a particular area, or in any other application</span>
<span class="sd">    that requires a predefined movement sequence. This function is used to</span>
<span class="sd">    set parameters which control the output of the LUT array.</span>

<span class="sd">    :param mode: Specifies the ouput mode of the LUT waveform as follows:</span>

<span class="sd">        0x01 - Output Continuous - The waveform is output continuously</span>
<span class="sd">        (i.e. until a StopOPLut command is received.)</span>

<span class="sd">        0x02 - Output Fixed - A fixed number of waveform cycles are output</span>
<span class="sd">        (as specified in the num_cycles parameter).</span>
<span class="sd">    :param cycle_length: Specifies how many samples will be output in each</span>
<span class="sd">        cycle of the waveform. It can be set in the range [0; 512]</span>
<span class="sd">        (for TPZ). It must be less than or equal to the total number of</span>
<span class="sd">        samples that were loaded.</span>
<span class="sd">    :param num_cycles: Specifies the number of cycles (1 to 2147483648) to</span>
<span class="sd">        be output when the Mode parameter is set to fixed. If Mode is set</span>
<span class="sd">        to Continuous, the num_cycles parameter is ignored. In both cases,</span>
<span class="sd">        the waveform is not output until a StartOPLUT command is received.</span>
<span class="sd">    :param delay_time: Specifies the delay (in sample intervals) that the</span>
<span class="sd">        system waits after setting each LUT output value. By default, the</span>
<span class="sd">        time the system takes to output LUT values (sampling interval) is</span>
<span class="sd">        set at the maximum bandwidth possible, i.e. 4 kHz (0.25 ms) for TPZ</span>
<span class="sd">        units. The delay_time parameter specifies the time interval between</span>
<span class="sd">        neighbouring samples, i.e. for how long the sample will remain at</span>
<span class="sd">        its present value. To increase the time between samples, set the</span>
<span class="sd">        delay_time parameter to the required additional delay (1 to</span>
<span class="sd">        2147483648 sample intervals). In this way, the user can stretch or</span>
<span class="sd">        shrink the waveform without affecting its overall shape.</span>
<span class="sd">    :param precycle_rest: In some applications, during waveform generation</span>
<span class="sd">        the first and the last samples may need to be handled differently</span>
<span class="sd">        from the rest of the waveform. For example, in a positioning system</span>
<span class="sd">        it may be necessary to start the movement by staying at a certain</span>
<span class="sd">        position for a specified length of time, then perform a movement,</span>
<span class="sd">        then remain at the last position for another specified length of</span>
<span class="sd">        time. This is the purpose of precycle_rest and postcycle_rest</span>
<span class="sd">        parameters, i.e. they specify the length of time that the first and</span>
<span class="sd">        last samples are output for, independently of the delay_time</span>
<span class="sd">        parameter. The precycle_rest parameter allows a delay time to be</span>
<span class="sd">        set before the system starts to clock out the LUT values. The delay</span>
<span class="sd">        can be set between 0 and 2147483648 sample intervals. The system</span>
<span class="sd">        then outputs the first value in the LUT until the PreCycleRest time</span>
<span class="sd">        has expired.</span>
<span class="sd">    :param postcycle_rest: In a similar way to precycle_rest, the</span>
<span class="sd">        postcycle_rest parameter specifies the delay imposed by the system</span>
<span class="sd">        after a LUT table has been output. The delay can be set between 0</span>
<span class="sd">        and 2147483648 sample intervals. The system then outputs the last</span>
<span class="sd">        value in the cycle until the postcycle_rest time has expired.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># triggering is not supported by the TPZ device</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span>
        <span class="s2">&quot;&lt;HHHLLLLHLH&quot;</span><span class="p">,</span>
        <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">,</span>
        <span class="n">cycle_length</span><span class="p">,</span>
        <span class="n">num_cycles</span><span class="p">,</span>
        <span class="n">delay_time</span><span class="p">,</span>
        <span class="n">precycle_rest</span><span class="p">,</span>
        <span class="n">postcycle_rest</span><span class="p">,</span>
        <span class="mi">0</span><span class="p">,</span>
        <span class="mi">0</span><span class="p">,</span>
        <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTLUTPARAMS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_output_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_output_position</span><span class="p">(</span><span class="n">position_sw</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set output position of the piezo actuator.</p>
<p>This command is only applicable in Closed Loop mode. If called when in
Open Loop mode, it is ignored. The position of the actuator is relative
to the datum set for the arrangement using the ZeroPosition method.</p>
<p>:param position_sw: The output position of the piezo relative to the
    zero position. The voltage is set in the range [0; 32767] or
    [0; 65535] depending on the unit. This corresponds to 0 to 100% of
    the maximum piezo extension.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position_sw</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set output position of the piezo actuator.</span>

<span class="sd">    This command is only applicable in Closed Loop mode. If called when in</span>
<span class="sd">    Open Loop mode, it is ignored. The position of the actuator is relative</span>
<span class="sd">    to the datum set for the arrangement using the ZeroPosition method.</span>

<span class="sd">    :param position_sw: The output position of the piezo relative to the</span>
<span class="sd">        zero position. The voltage is set in the range [0; 32767] or</span>
<span class="sd">        [0; 65535] depending on the unit. This corresponds to 0 to 100% of</span>
<span class="sd">        the maximum piezo extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">position_sw</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTPOS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_output_volts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_output_volts</span><span class="p">(</span><span class="n">voltage</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set output voltage applied to the piezo actuator.</p>
<p>This command is only applicable in Open Loop mode. If called when in
Closed Loop mode it is ignored.</p>
<p>:param voltage: The output voltage applied to the piezo when operating
    in open loop mode. The voltage value must be in range
    [0; voltage_limit]. Voltage_limit being set by the
    :py:meth:<code>set_tpz_io_settings()&lt;Tpz.set_tpz_io_settings&gt;</code>
    method between the three values 75 V, 100 V and 150 V.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_output_volts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">voltage</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set output voltage applied to the piezo actuator.</span>

<span class="sd">    This command is only applicable in Open Loop mode. If called when in</span>
<span class="sd">    Closed Loop mode it is ignored.</span>

<span class="sd">    :param voltage: The output voltage applied to the piezo when operating</span>
<span class="sd">        in open loop mode. The voltage value must be in range</span>
<span class="sd">        [0; voltage_limit]. Voltage_limit being set by the</span>
<span class="sd">        :py:meth:`set_tpz_io_settings()&lt;Tpz.set_tpz_io_settings&gt;`</span>
<span class="sd">        method between the three values 75 V, 100 V and 150 V.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Voltage limit is not set&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">voltage</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">voltage</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Voltage must be in range [0;</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="n">volt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">voltage</span> <span class="o">*</span> <span class="mi">32767</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">volt</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_OUTPUTVOLTS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_pi_constants" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_pi_constants</span><span class="p">(</span><span class="n">prop_const</span><span class="p">,</span> <span class="n">int_const</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set the proportional and integration feedback loop constants.</p>
<p>These parameters determine the response characteristics when operating
in closed loop mode.
The processors within the controller compare the required (demanded)
position with the actual position to create an error, which is then
passed through a digital PI-type filter. The filtered value is used to
develop an output voltage to drive the pizeo.</p>
<p>:param prop_const: Value of the proportional term in range [0; 255].
:param int_const: Value of the integral term in range [0; 255].</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_pi_constants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop_const</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">int_const</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the proportional and integration feedback loop constants.</span>

<span class="sd">    These parameters determine the response characteristics when operating</span>
<span class="sd">    in closed loop mode.</span>
<span class="sd">    The processors within the controller compare the required (demanded)</span>
<span class="sd">    position with the actual position to create an error, which is then</span>
<span class="sd">    passed through a digital PI-type filter. The filtered value is used to</span>
<span class="sd">    develop an output voltage to drive the pizeo.</span>

<span class="sd">    :param prop_const: Value of the proportional term in range [0; 255].</span>
<span class="sd">    :param int_const: Value of the integral term in range [0; 255].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;HHH&quot;</span><span class="p">,</span> <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">prop_const</span><span class="p">,</span> <span class="n">int_const</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_PICONSTS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_position_control_mode" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_position_control_mode</span><span class="p">(</span><span class="n">control_mode</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set the control loop mode.</p>
<p>When in closed-loop mode, position is maintained by a feedback signal
from the piezo actuator. This is only possible when using actuators
equipped with position sensing.</p>
<p>:param control_mode: 0x01 for Open Loop (no feedback).
    0x02 for Closed Loop (feedback employed).
    0x03 for Open Loop Smooth.
    0x04 for Closed Loop Smooth.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_position_control_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_mode</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the control loop mode.</span>

<span class="sd">    When in closed-loop mode, position is maintained by a feedback signal</span>
<span class="sd">    from the piezo actuator. This is only possible when using actuators</span>
<span class="sd">    equipped with position sensing.</span>

<span class="sd">    :param control_mode: 0x01 for Open Loop (no feedback).</span>
<span class="sd">        0x02 for Closed Loop (feedback employed).</span>
<span class="sd">        0x03 for Open Loop Smooth.</span>
<span class="sd">        0x04 for Closed Loop Smooth.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
        <span class="n">Message</span><span class="p">(</span>
            <span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_POSCONTROLMODE</span><span class="p">,</span> <span class="n">param1</span><span class="o">=</span><span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span> <span class="n">param2</span><span class="o">=</span><span class="n">control_mode</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_tpz_display_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_tpz_display_settings</span><span class="p">(</span><span class="n">intensity</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set the intensity of the LED display on the front of the TPZ unit.</p>
<p>:param intensity: The intensity is set as a value from 0 (Off) to 255
    (brightest).</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_tpz_display_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intensity</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the intensity of the LED display on the front of the TPZ unit.</span>

<span class="sd">    :param intensity: The intensity is set as a value from 0 (Off) to 255</span>
<span class="sd">        (brightest).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;H&quot;</span><span class="p">,</span> <span class="n">intensity</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_TPZ_DISPSETTINGS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.set_tpz_io_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_tpz_io_settings</span><span class="p">(</span><span class="n">voltage_limit</span><span class="p">,</span> <span class="n">hub_analog_input</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Set various I/O settings.</p>
<p>:param voltage_limit: The piezo actuator connected to the T-Cube has a
    specific maximum operating voltage. This parameter sets the maximum
    output to the value among the following ones:</p>
<pre><code>75 V limit.

100 V limit.

150 V limit.
</code></pre>
<p>:param hub_analog_input: When the T-Cube piezo driver unit is used in
    conjunction with the T-Cube Strain Gauge Reader (TSG001) on the
    T-Cube Controller Hub (TCH001), a feedback signal can be passed
    from the Strain Gauge Reader to the Piezo unit.
    High precision closed loop operation is then possible using the
    complete range of feedback-equipped piezo actuators.
    This parameter is routed to the Piezo unit as follows:</p>
<pre><code>0x01: the feedback signals run through all T-Cube bays.

0x02: the feedback signals run between adjacent pairs of T-Cube
bays (i.e. 1&amp;2, 3&amp;4, 5&amp;6). This setting is useful when several
pairs of Strain Gauge/Piezo Driver cubes are being used on the same
hub.

0x03: the feedback signals run through the read panel SMA
connectors.
</code></pre>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">set_tpz_io_settings</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">voltage_limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hub_analog_input</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set various I/O settings.</span>

<span class="sd">    :param voltage_limit: The piezo actuator connected to the T-Cube has a</span>
<span class="sd">        specific maximum operating voltage. This parameter sets the maximum</span>
<span class="sd">        output to the value among the following ones:</span>

<span class="sd">        75 V limit.</span>

<span class="sd">        100 V limit.</span>

<span class="sd">        150 V limit.</span>
<span class="sd">    :param hub_analog_input: When the T-Cube piezo driver unit is used in</span>
<span class="sd">        conjunction with the T-Cube Strain Gauge Reader (TSG001) on the</span>
<span class="sd">        T-Cube Controller Hub (TCH001), a feedback signal can be passed</span>
<span class="sd">        from the Strain Gauge Reader to the Piezo unit.</span>
<span class="sd">        High precision closed loop operation is then possible using the</span>
<span class="sd">        complete range of feedback-equipped piezo actuators.</span>
<span class="sd">        This parameter is routed to the Piezo unit as follows:</span>

<span class="sd">        0x01: the feedback signals run through all T-Cube bays.</span>

<span class="sd">        0x02: the feedback signals run between adjacent pairs of T-Cube</span>
<span class="sd">        bays (i.e. 1&amp;2, 3&amp;4, 5&amp;6). This setting is useful when several</span>
<span class="sd">        pairs of Strain Gauge/Piezo Driver cubes are being used on the same</span>
<span class="sd">        hub.</span>

<span class="sd">        0x03: the feedback signals run through the read panel SMA</span>
<span class="sd">        connectors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">=</span> <span class="n">voltage_limit</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>
        <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
        <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">voltage_limit</span> <span class="o">==</span> <span class="mi">150</span><span class="p">:</span>
        <span class="n">voltage_limit</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;voltage_limit must be 75 V, 100 V or 150 V&quot;</span><span class="p">)</span>

    <span class="n">payload</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span>
        <span class="s2">&quot;&lt;HHHHH&quot;</span><span class="p">,</span>
        <span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">,</span>
        <span class="n">voltage_limit</span><span class="p">,</span>
        <span class="n">hub_analog_input</span><span class="p">,</span>
        <span class="n">Tpz</span><span class="o">.</span><span class="n">_RESERVED</span><span class="p">,</span>
        <span class="n">Tpz</span><span class="o">.</span><span class="n">_RESERVED</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_SET_TPZ_IOSETTINGS</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.start_lut_output" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_lut_output</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Start the voltage waveform (LUT) outputs.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">start_lut_output</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the voltage waveform (LUT) outputs.&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_START_LUTOUTPUT</span><span class="p">,</span> <span class="n">param1</span><span class="o">=</span><span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="thorlabs_cube.driver.tcube.tpz.Tpz.stop_lut_output" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop_lut_output</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Stop the voltage waveform (LUT) outputs.</p>

            <details class="quote">
              <summary>Source code in <code>venv/lib/python3.9/site-packages/thorlabs_cube/driver/tcube/tpz.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">stop_lut_output</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop the voltage waveform (LUT) outputs.&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Message</span><span class="p">(</span><span class="n">MGMSG</span><span class="o">.</span><span class="n">PZ_STOP_LUTOUTPUT</span><span class="p">,</span> <span class="n">param1</span><span class="o">=</span><span class="n">Tpz</span><span class="o">.</span><span class="n">_CHANNEL</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>













              </article>
            </div>


  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>

      </main>

        <footer class="md-footer">

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>

</div>

    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>


    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.expand", "content.code.copy", "toc.integrate", "content.tabs.link"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>


      <script src="../../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>


  </body>
</html>
